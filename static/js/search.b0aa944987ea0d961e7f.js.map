{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/pages/search/search.js"],"names":["url","hotList","banner","topLists","subLists","rank","searchLists","key","hasOwnProperty","Vue","use","__WEBPACK_IMPORTED_MODULE_1_mint_ui_lib___default","a","qs","parse","window","location","search","substring","keyword","id","console","log","el","data","pageNum","pageSize","searchLoading","allLoad","isShow","created","this","getSearchLists","methods","_this","axios","get","then","res","currentList","lists","length","concat","scrollMove","scrollY","goToTop","Velocity","document","body","duration","easing"],"mappings":"kGAEE,IAAIA,GACFC,QAAS,kBACTC,OAAO,gBACPC,SAAS,oBACTC,SAAU,oBACVC,KAAM,iBACNC,YAAY,gBAKd,IAAK,IAAMC,KAAOP,EACZA,EAAIQ,eAAeD,KACrBP,EAAIO,GAJG,0CAIWP,EAAIO,IAKXP,mTCVjBS,UAAIC,IAAJC,EAAAC,SAQIC,IAAGC,MAAMC,OAAOC,SAASC,OAAOC,UAAU,IAF5CC,YACAC,OAGFC,QAAQC,IAAIT,IAAGC,MAAMC,OAAOC,SAASC,OAAOC,UAAU,KAEtD,IAAIT,WACFc,GAAI,aACJC,MACEL,UACAC,KACAK,QAAS,EACTC,SAAU,EACVpB,YAAa,KACbqB,eAAe,EACfC,SAAS,EACTC,QAAQ,GAEVC,QAZM,WAaJC,KAAKC,kBAEPC,SACED,eADO,WACU,IAAAE,EAAAH,KACXA,KAAKH,UACTG,KAAKJ,eAAgB,EACrBQ,IAAMC,IAAIpC,IAAIM,aACZc,KACAD,UACAM,QAASM,KAAKN,QACdC,SAAUK,KAAKL,WACdW,KAAK,SAACC,GACP,IAAIC,EAAcD,EAAId,KAAKgB,MACvBD,EAAYE,OAASP,EAAKR,WAAUQ,EAAKN,SAAU,GACnDM,EAAK5B,YACP4B,EAAK5B,YAAc4B,EAAK5B,YAAYoC,OAAOH,GAE3CL,EAAK5B,YAAciC,EAErBL,EAAKT,UACLS,EAAKP,eAAgB,MAGzBgB,WArBO,WAsBLtB,QAAQC,IAAI,YACRP,OAAO6B,SAAW,IACpBb,KAAKF,QAAS,EAEdE,KAAKF,QAAS,GAGlBgB,QA7BO,WA8BLC,IAASC,SAASC,KAAM,UACtBC,SAAU,IACVC,OAAQ,iBAEVnB,KAAKF,QAAS","file":"static/js/search.b0aa944987ea0d961e7f.js","sourcesContent":["\r\n  \r\n  let url = {\r\n    hotList: '/index/hotLists',\r\n    banner:'/index/banner',\r\n    topLists:'/category/topList',\r\n    subLists: '/category/subList',\r\n    rank: '/category/rank',\r\n    searchLists:'/search/list',\r\n  }\r\n\r\n  let host = 'http://rap2api.taobao.org/app/mock/7058'\r\n\r\n  for (const key in url) {\r\n    if (url.hasOwnProperty(key)) {\r\n      url[key] = host + url[key];\r\n\r\n    }\r\n  }\r\n\r\n  export default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import 'css/common.css'\r\nimport './search.css'\r\n\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport url from 'js/api.js'\r\nimport qs from 'qs'\r\n\r\n\r\nimport MintUI from 'mint-ui'\r\nVue.use(MintUI)\r\n\r\nimport Velocity from 'velocity-animate/velocity.js'\r\nimport 'velocity-animate/velocity.ui.js'\r\n\r\nlet {\r\n  keyword,\r\n  id\r\n} = qs.parse(window.location.search.substring(1))\r\n\r\nconsole.log(qs.parse(window.location.search.substring(1)));\r\n\r\nnew Vue({\r\n  el: '.container',\r\n  data: {\r\n    keyword,\r\n    id,\r\n    pageNum: 1,\r\n    pageSize: 8,\r\n    searchLists: null,\r\n    searchLoading: false,\r\n    allLoad: false,\r\n    isShow: false\r\n  },\r\n  created() {\r\n    this.getSearchLists()\r\n  },\r\n  methods: {\r\n    getSearchLists() {\r\n      if (this.allLoad) return\r\n      this.searchLoading = true\r\n      axios.get(url.searchLists, {\r\n        id,\r\n        keyword,\r\n        pageNum: this.pageNum,\r\n        pageSize: this.pageSize\r\n      }).then((res) => {\r\n        let currentList = res.data.lists\r\n        if (currentList.length < this.pageSize) this.allLoad = true\r\n        if (this.searchLists) {\r\n          this.searchLists = this.searchLists.concat(currentList)\r\n        } else {\r\n          this.searchLists = currentList\r\n        }\r\n        this.pageNum++\r\n        this.searchLoading = false\r\n      })\r\n    },\r\n    scrollMove() {\r\n      console.log(1111111111)\r\n      if (window.scrollY >= 200) {\r\n        this.isShow = true\r\n      } else {\r\n        this.isShow = false\r\n      }\r\n    },\r\n    goToTop() {\r\n      Velocity(document.body, 'scroll', {\r\n        duration: 500,\r\n        easing: \"easeOutQuart\"\r\n      });\r\n      this.isShow = false\r\n    }\r\n  },\r\n\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.js"],"sourceRoot":""}